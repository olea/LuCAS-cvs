<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<HTML
><HEAD
><TITLE
>Herencia</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.59"><LINK
REL="HOME"
TITLE="PostgreSQL"
HREF="postgres.html"><LINK
REL="UP"
TITLE="Guía de Usuario"
HREF="part-user.html"><LINK
REL="PREVIOUS"
TITLE="Matrices"
HREF="arrays.html"><LINK
REL="NEXT"
TITLE="Multi-Version Concurrency Control (Control de la Concurrencia Multi Versión)"
HREF="mvcc.html"></HEAD
><BODY
CLASS="CHAPTER"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>PostgreSQL</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="arrays.html"
>Anterior</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="mvcc.html"
>Siguiente</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="CHAPTER"
><H1
><A
NAME="INHERIT"
>Herencia</A
></H1
><P
>  Creemos dos clases. La clase <TT
CLASS="CLASSNAME"
>capitals</TT
> contiene las capitales de
  los estados que son también ciudades. Naturalmente, la clase
  <TT
CLASS="CLASSNAME"
>capitals</TT
> debe heredar de <TT
CLASS="CLASSNAME"
>cities</TT
>.

  <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>CREATE TABLE cities (
    name            text,
    population      float,
    altitude        int     -- (in ft)
);

CREATE TABLE capitals (
    state           char(2)
) INHERITS (cities);
  </PRE
></TD
></TR
></TABLE
>

   En este caso, una instancia de <TT
CLASS="CLASSNAME"
>capitals</TT
> <I
CLASS="FIRSTTERM"
>hereda
   (inherits)</I
> todos los atributos (name, population,
   altitude) de la clase <TT
CLASS="CLASSNAME"
>cities</TT
>. El tipo del atributo name es
   <SPAN
CLASS="TYPE"
>text</SPAN
>, un tipo de dato nativo de
   <SPAN
CLASS="PRODUCTNAME"
>Postgres</SPAN
> para cadenas ASCII de longitud
   variable. El tipo del atributo population es <SPAN
CLASS="TYPE"
>float</SPAN
>, un
   tipo datos, también nativo, para números de punto flotante de doble
   precisión.
   Además <TT
CLASS="CLASSNAME"
>capitals</TT
> tiene un atributo extra, state, que muestra el
   estado al que pertenece. En <SPAN
CLASS="PRODUCTNAME"
>Postgres</SPAN
> una
   clase puede heredar de ninguna o varias otras clases, y una consulta
   puede hacer referencia tanto a todas las instancias de una clase como
   a todas las instancias de sus descendientes.

   <DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="./stylesheet-images/note.gif"
HSPACE="5"
ALT="Nota"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>     En realidad, la jerarquía de la herencia es un gráfico
     dirigido y acíclico.
    </P
></TD
></TR
></TABLE
></DIV
>

   Por ejemplo, la siguiente consulta encuentra todas las ciudades
   situadas a una altitud de 500 pies o más:

   <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>SELECT name, altitude
    FROM cities
    WHERE altitude &#62; 500;

+----------+----------+
|name      | altitude |
+----------+----------+
|Las Vegas | 2174     |
+----------+----------+
|Mariposa  | 1953     |
+----------+----------+
   </PRE
></TD
></TR
></TABLE
>
  </P
><P
>   Por otro lado, para encontrar los nombres de todas las ciudades,
   incluyendo las capitales de estado, que están localizadas
   a un altitud por encima de los 500 pies, la consulta sería:

   <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>SELECT c.name, c.altitude
    FROM cities* c
    WHERE c.altitude &#62; 500;
   </PRE
></TD
></TR
></TABLE
>

Lo que devuelve lo siguiente:

   <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>+----------+----------+
|name      | altitude |
+----------+----------+
|Las Vegas | 2174     |
+----------+----------+
|Mariposa  | 1953     |
+----------+----------+
|Madison   | 845      |
+----------+----------+
   </PRE
></TD
></TR
></TABLE
>

   Aquí, el <SPAN
CLASS="QUOTE"
>"*"</SPAN
> después de <TT
CLASS="CLASSNAME"
>cities</TT
> indica que la consulta
   debe realizarse sobre <TT
CLASS="CLASSNAME"
>cities</TT
> y todas las clases que estén
   por debajo de ella en la jerarquía de herencia. Muchas de las 
   órdenes que ya hemos analizado (<B
CLASS="COMMAND"
>SELECT</B
>,
   <B
CLASS="COMMAND"
>UPDATE</B
> y <B
CLASS="COMMAND"
>DELETE</B
>) permiten
   la utilización de <SPAN
CLASS="QUOTE"
>"*"</SPAN
>, así como otros, como pueden ser
   <B
CLASS="COMMAND"
>ALTER TABLE</B
>.
  </P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="arrays.html"
>Anterior</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="postgres.html"
>Inicio</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="mvcc.html"
>Siguiente</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Matrices</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="part-user.html"
>Subir</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Multi-Version Concurrency Control (Control de la Concurrencia Multi Versión)</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>