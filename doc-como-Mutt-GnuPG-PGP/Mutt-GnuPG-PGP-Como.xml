<?xml version="1.0" encoding="iso-8859-1" ?>
<!DOCTYPE article PUBLIC "-//OASIS//DTD DocBook V4.1.2//EN"
"http://www.oasis-open.org/docbook/xml/4.1.2/docbookx.dtd">

<article>

<articleinfo>

<title>Mutt-i, GnuPG y PGP Como</title>

<author>
<firstname>Andrés Seco <ulink
url="mailto:AndresSH@ctv.es"
>AndresSH@ctv.es</ulink
> y J.Horacio M.G. <ulink
url="mailto:homega@ciberia.es"
>homega@ciberia.es</ulink
></firstname>
</author>

<pubdate>v1.2, 7 de Febrero de 2000</pubdate>

<abstract>

<para>
Este documento explica la forma de configurar <emphasis remap="it">Mutt-i</emphasis>, <emphasis remap="it">PGP</emphasis> y
<emphasis remap="it">GnuPG</emphasis> en sus diferentes versiones (2.6.x, 5.x y GnuPG) de forma rápida
indicando los posibles problemas que pueden surgir al enviar correo firmado o
cifrado para ser leído por clientes de correo que no se ajustan a las
especificaciones PGP/MIME definidas en la RFC2015 y por otros sistemas
operativos. Incluye además un ejemplo de configuración de procmail para enviar
las claves públicas de forma automática a peticiones recibidas por correo
electrónico, como si de un servidor de claves se tratara.
</para>

</abstract>

</articleinfo>

<sect1>
<title>Introducción</title>

<para>
Este documento explica la forma de configurar <emphasis>Mutt-i</emphasis> y <emphasis>PGP</emphasis> en sus
versiones <literal remap="tt">2.6.x</literal>, <literal remap="tt">5.x</literal> y <literal remap="tt">GnuPG</literal> para poder tener en marcha de forma
rápida un lector de correo con seguridad de firmas y cifrado digital.
</para>

<para>
Para esto se incluirán ficheros de configuración de ejemplo que servirán para
la puesta en marcha. Para obtener el máximo rendimiento y usar todas las
características de los programas que se utilizarán será necesario leer la
documentación adjunta a cada programa y reconfigurar dichos ficheros de
configuración que se incluyen como ejemplos.
</para>

<para>
Además, se comentarán algunos problemas derivados de la falta de seguimiento de
la recomendación RFC2015 sobre PGP/MIME por parte de muchos programas de correo
electrónico, tanto en Linux como en otros sistemas operativos.
</para>

<para>
Será presentado también un ejemplo de configuración de procmail de forma que
puedan ser enviadas las claves públicas de manera automática a la recepción de
mensajes que las soliciten.
</para>

<para>
Nos gustaría dar las gracias a Roland Rosenfeld <literal remap="tt"><ulink
url="mailto:roland@spinnaker.de"
>roland@spinnaker.de</ulink
></literal>, Christophe
Pernod <literal remap="tt"><ulink
url="mailto:xtof.pernod@wanadoo.fr"
>xtof.pernod@wanadoo.fr</ulink
></literal>, Denis Alan Hainsworth <literal remap="tt"><ulink
url="mailto:denis@cs.brandeis.edu"
>denis@cs.brandeis.edu</ulink
></literal> y Angel
Carrasco <literal remap="tt"><ulink
url="mailto:acarrasco@jet.es"
>acarrasco@jet.es</ulink
></literal> por sus correcciones y sugerencias.
</para>

</sect1>

<sect1>
<title>Copyright y descarga de responsabilidad</title>

<para>
Este documento es <literal remap="tt">copyright &copy; 1999 Andrés Seco y J. Horacio M.G.</literal>,
y es un documento libre. Puedes distribuirlo bajo los términos de la <emphasis remap="bf">GNU
General Public License</emphasis>, que puedes encontrar en <literal remap="tt"><ulink
url="http://www.gnu.org/copyleft/gpl.html"
>http://www.gnu.org/copyleft/gpl.html</ulink
></literal>. Una copia de ésta traducida
al castellano la puedes encontrar en <literal remap="tt"><ulink
url="http://visar.csustan.edu/~carlos/gpl-es.html"
>http://visar.csustan.edu/~carlos/gpl-es.html</ulink
></literal>
</para>

<para>
La información y otros contenidos en este documento son lo mejor de nuestros
conocimientos. Sin embargo, hemos podido cometer errores. Así que deberías
determinar si deseas seguir las instrucciones que se encuentran en este
documento.
</para>

<para>
Nadie es responsable de cualquier daño en sus ordenadores y cualquier otra
pérdida por el uso de la información contenida aquí.
</para>

<para>
LOS AUTORES Y MANTENEDORES NO SON RESPONSABLES DE CUALQUIER DAÑO INCURRIDO A
CAUSA DE ACCIONES TOMADAS EN BASE A LA INFORMACION CONTENIDA EN ESTE DOCUMENTO. 
</para>

<para>
Por supuesto, estamos abiertos a todo tipo de sugerencias y correcciones sobre
el contenido de este documento.
</para>

</sect1>

<sect1>
<title>Nota sobre el intercambio de correo desde/hacia internet</title>

<para>
Este documento no trata sobre el intercambio de mensajes de correo electrónico
entre el equipo local y otros equipos (en red local o en internet). Dicho
intercambio debe ser realizado mediante programas que actúen como Agentes de
Transferencia de Mensajes (MTAs) como Sendmail, <literal remap="tt"><ulink
url="http://www.sendmail.org"
>http://www.sendmail.org</ulink
></literal>, qmail,
<literal remap="tt"><ulink
url="http://www.es.qmail.org"
>http://www.es.qmail.org</ulink
></literal>, Exim, <literal remap="tt"><ulink
url="http://www.exim.org"
>http://www.exim.org</ulink
></literal>, Smail, <literal remap="tt"><ulink
url="ftp://ftp.planix.com/pub/Smail"
>ftp://ftp.planix.com/pub/Smail</ulink
></literal>, etc.
</para>

<para>
En este documento se presupone que este método de envío/recepción de mensajes
fuera del equipo local ya está instalado y funcionando de forma correcta. Si
puede enviar un mensaje y leer su correo con el comando <literal remap="tt">mail</literal> desde el
indicador de linea de comando de su equipo,
</para>

<para>

<screen>
$ mail -s &#60;asunto&#62; &#60;usuario@dominio.net&#62;
escribir aquí el texto, y finalizar con un punto en la línea siguiente
.
</screen>

</para>

<para>
es que debes tener instalado algún tipo de MTA que se encargue de la
transferencia de mensajes. En caso contrario, puedes encontrar documentación al
respecto en las páginas de manual de <emphasis>smail</emphasis>:
</para>

<para>

<screen>
 
$ man smail
</screen>

</para>

<para>
o del MTA que tengas instalado, y las de <emphasis>fetchmail</emphasis>:
</para>

<para>

<screen>
$ man fetchmail
</screen>

</para>

<para>
o en otro documento similar a estos que haga referencia a dichos programas.
</para>

</sect1>

<sect1>
<title>Configuración de mutt</title>

<para>
El siguiente fichero de ejemplo es válido para comenzar a usar <emphasis>Mutt</emphasis> de
forma básica incluyendo caminos para los ficheros de alias, mensajes enviados y
mensajes postpuestos. Se puede realizar una mayor personalización atendiendo a
las indicaciones del manual de <emphasis>Mutt</emphasis> en <literal remap="tt">/usr/doc/mutt/</literal> o
<literal remap="tt">/usr/doc/mutt-i/</literal>
</para>

<para>
Ejemplo simple de <literal remap="tt">&tilde;/.muttrc</literal>:
</para>

<para>

<screen>
set folder=~/Mail
set alias_file=.alias
set postponed=.postponed
set record=MensajesEnviados
set signature=.signature
my_hdr From: Nombre Apellido &#60;Nombre@dominio.com&#62;
source =.alias
</screen>

</para>

<para>
Es necesario que exista el directorio <literal remap="tt">&tilde;/Mail</literal>, que es el que
aparece como un signo de «igual que» en el fichero de configuración
<literal remap="tt">.muttrc</literal> (esto es, <literal remap="tt">=.alias</literal> quiere decir para <emphasis>Mutt</emphasis>
<literal remap="tt">&tilde;/Mail/.alias</literal>, y <literal remap="tt">=.postponed</literal> quiere decir para <emphasis>Mutt</emphasis>
<literal remap="tt">&tilde;/Mail/.postponed</literal>). No obstante es posible tener estos ficheros
en otro directorio siempre y cuando indiquemos el camino completo en
<literal remap="tt">&tilde;/.muttrc</literal>, y tengamos los permisos necesarios para trabajar en
dicho directorio.
</para>

<para>
También hay que personalizar la linea <literal remap="tt">my_hdr</literal> con el nombre y la dirección
de correo electrónico adecuados. En el fichero <literal remap="tt">&tilde;/Mail/.signature</literal>
se puede incluir la firma que aparecerá en todos los mensajes que se envíen.
</para>

<para>
Este fichero de configuracion puede llegar a hacerse muy grande, por lo que es
común separar algunos de sus comandos en ficheros diferentes. Por lo pronto,
son facilmente separables las lineas de configuración de <emphasis>PGP</emphasis> o <emphasis>GnuPG</emphasis>
y las macros de teclado que personalicemos. Para ello seria necesario añadir
las lineas siguientes al fichero <literal remap="tt">&tilde;/.muttrc</literal>:
</para>

<para>

<screen>
source = ~/Mail/.mutt.macros
source = ~/Mail/.gnupgp.mutt
</screen>

</para>

<para>
y utilizar los ficheros <literal remap="tt">&tilde;/Mail/.mutt.macros</literal> y
<literal remap="tt">&tilde;/Mail/.gnupgp.mutt</literal> para introducir en ellos las macros de
teclado y la configuración de <emphasis>PGP</emphasis> o <emphasis>GnuPG</emphasis> que más adelante se
comentan.
</para>

<para>
Para una información más extensiva y completa sobre el uso y configuración de
<emphasis>Mutt</emphasis>, así como de características avanzadas, ver el Manual de Mutt en
<literal remap="tt"><ulink
url="http://www.lucas.org/manual_mutt.html"
>http://www.lucas.org/manual_mutt.html</ulink
></literal>.
</para>

</sect1>

<sect1>
<title>PGP y GnuPG</title>

<para>
Para usar cualquiera de las versiones de <emphasis>PGP</emphasis> con <emphasis>Mutt-i</emphasis>, primero será
necesario configurar adecuadamente <emphasis>PGP</emphasis> de modo que existan el fichero con
las claves públicas (anillo de claves públicas) y el fichero con las claves
privadas (anillo de claves privadas). Conviene probar previamente PGP desde la
línea de comandos para asegurarse de que firma y cifra correctamente.
</para>

<para>
Recordemos que para <emphasis>Unix</emphasis> las versiones de <emphasis>PGP</emphasis> existentes son
<literal remap="tt">2.6.3(i)</literal> y <literal remap="tt">5.0(i)</literal>, que de ahora en adelante llamaremos <emphasis remap="bf">PGP2</emphasis> y
<emphasis remap="bf">PGP5</emphasis> respectivamente. <emphasis remap="bf">GnuPG</emphasis> es un sistema de codificación nuevo,
todavía en desarrollo aunque muy avanzado, de código abierto y libre, en muchos
aspectos superior a <emphasis remap="bf">PGP</emphasis> (ver GnuPG mini como en <literal remap="tt"><ulink
url="http://www.insflug.org/documentos/GPG-Mini-Como/"
>http://www.insflug.org/documentos/GPG-Mini-Como/</ulink
></literal>).
</para>

<para>
Aclararemos también que <emphasis>PGP</emphasis>, al ser un sistema desarrollado en los EE.UU.,
está sujeto a ciertas leyes sobre la exportación de programas que incluyen
código criptográfico;  por esta razón existe una versión internacional para
casi todas las versiones numéricas, y ésta vienen denotadas por la letra
«<emphasis remap="bf">i</emphasis>» (<emphasis remap="bf">pgp - pgpi</emphasis>).
</para>

<sect2>
<title>PGP2</title>

<para>
<emphasis>PGP2</emphasis> genera claves con el algoritmo RSA (<literal remap="tt"><ulink
url="http://www.rsa.com"
>http://www.rsa.com</ulink
></literal>), y como algoritmo de
cifrado usa IDEA (<literal remap="tt"><ulink
url="http://www.ascom.ch"
>http://www.ascom.ch</ulink
></literal>).
</para>

<para>
Ambos son algoritmos propietarios y su uso está restringido por sus respectivas
patentes.
</para>

<para>
Para su correcto funcionamiento, una vez instalado el programa, deberemos tener
un directorio <literal remap="tt">&tilde;/.pgp</literal>, en el que se encuentren el fichero de
configuración <literal remap="tt">pgp-i.conf</literal> y los ficheros con los anillos de claves públicas
y privadas, <literal remap="tt">pubring.pgp</literal> y <literal remap="tt">secring.pgp</literal> respectivamente.
</para>

</sect2>

<sect2>
<title>PGP5</title>

<para>
Las claves generadas por <emphasis>PGP5</emphasis> son del tipo <emphasis remap="bf">DSS/DH</emphasis> (Digital
Signature Standard / Diffie-Helman). PGP5 usa como algoritmos de cifrado
<emphasis remap="bf">CAST</emphasis>, <emphasis remap="bf">Triple-DES</emphasis>, e <emphasis remap="bf">IDEA</emphasis>.  PGP5 puede trabajar con datos
cifrados y/o firmados con <emphasis>RSA</emphasis> (PGP2), e incluso usar estas claves para
cifrar y/o firmar digitalmente (con claves generadas por PGP2, ya que PGP5 no
puede generar dichas claves).  Por contra, PGP2 no reconoce las claves
<emphasis>DSS/DH</emphasis> de PGP5;  esto crea un problema de incompatibilidad, pues en
<emphasis>Unix/Linux</emphasis> todavía muchos usuarios tienen instalado sólo la versión de
PGP2.
</para>

<para>
Para el correcto funcionamiento de PGP5, en el directorio
<literal remap="tt">&tilde;/.pgp</literal>, se encontrarán los anillos de claves públicas y privadas
(<literal remap="tt">pubring.pkr</literal> y <literal remap="tt">secring.skr</literal> respectivamente), así como el fichero de
configuración <literal remap="tt">pgp.cfg</literal>.
</para>

<para>
En caso de tener instaladas las dos versiones de <emphasis>PGP</emphasis> (por tanto, habremos
instalado y configurado PGP2 antes que PGP5), el fichero de configuración
<literal remap="tt">&tilde;/.pgp/pgp.cfg</literal> de PGP5 lo crearemos como un enlace simbólico al
fichero de configuración <literal remap="tt">&tilde;/.pgp/pgp-i.conf</literal>,
</para>

<para>

<screen>
~/.pgp$ ln -s pgp-i.conf pgp.cfg
</screen>

</para>

<para>
añadiendo las siguientes líneas al final del fichero
<literal remap="tt">&tilde;/.pgp/pgp-i.conf</literal>:
</para>

<para>

<screen>
PubRing = "~/.pgp/pubring.pkr"
SecRing = "~/.pgp/secring.skr"
RandSeed = "~/.pgp/randseed.bin"
</screen>

</para>

<para>
Los ficheros con los anillos de claves de las diferentes versiones pueden
coexistir sin ningún problema en el mismo directorio.
</para>

</sect2>

<sect2>
<title>GnuPG</title>

<para>
<emphasis remap="bf">GnuPG</emphasis> es un programa con las mismas funciones que el anterior. A
diferencia de <emphasis>PGP</emphasis>, <emphasis>GnuPG</emphasis> evita el uso de algoritmos con patentes
restrictivas. <emphasis>PGP</emphasis> puede ser usado libremente con fines personales, pero no
comerciales, y su desarrollo es cerrado.  <emphasis>GnuPG</emphasis> es de libre uso, y de
desarrollo abierto, al igual que nuestro sistema operativo favorito (además de
que su implementación y desarrollo es principalmente en <emphasis>Linux</emphasis>).
</para>

<para>
Las claves generadas por <emphasis>GnuPG</emphasis> son del tipo <emphasis remap="bf">DSA/ElGamal</emphasis>
(<emphasis>Digital Signature Algorithm</emphasis>, también conocido como <emphasis>DSS</emphasis>). Es
totalmente compatible con <emphasis>PGP</emphasis>, excepto en el uso de los algoritmos con
patentes restrictivas <emphasis>RSA</emphasis> e <emphasis>IDEA</emphasis>.  No obstante, es posible
implementar cierta compatibilidad al respecto (ver GnuPG mini como en <ulink
url="http://www.insflug.org/documentos/GPG-Mini-Como/"
>http://www.insflug.org/documentos/GPG-Mini-Como/</ulink
> para su configuración
e interacción con PGP2 y PGP5).
</para>

</sect2>

</sect1>

<sect1>
<title>Integración de PGP y Mutt</title>

<para>
La operación a realizar en los mensajes salientes (firmar, cifrar o ambas) se
elige justo antes de pulsar «<literal remap="tt">y</literal>» para enviar el mensaje, en el menú de
opciones que aparece con la opción «<literal remap="tt">p</literal>». Una vez elegida la operación a
realizar simplemente cambiará la linea de <emphasis>PGP</emphasis> en la cabecera que se
muestra en pantalla, pero hasta que no enviemos el mensaje con «<literal remap="tt">y</literal>» no se
nos pedirá introducir la frase de paso para activar la firma del mensaje o las
claves publicas a utilizar para el cifrado en caso de que no coincida algún
destinatario con los que tienen clave pública en nuestro anillo de claves.
</para>

<para>
<emphasis remap="bf">NOTA:</emphasis> En caso de que cometamos un error al introducir la frase de paso
cuando nos es solicitada, parecerá que <emphasis>Mutt</emphasis> se queda «colgado»,
pero no será así, si no que estará esperando que la volvamos a introducir.
Para ello pulsaremos la tecla <literal remap="tt">&lt;Intro&gt;</literal> y borraremos la contraseña de
la memoria con el juego de teclas <literal remap="tt">&lt;Ctrl&gt;F</literal>.  A continuación
repetiremos la operación de enviar el mensaje («<literal remap="tt">y</literal>») y tendremos que volver
a introducir la contraseña.
</para>

<para>
<emphasis>Mutt</emphasis>, en este caso, usará <emphasis>PGP/MIME</emphasis> para enviar el mensaje, de
modo que aparecerá un nuevo adjunto al mensaje con la firma (si sólo hemos
elegido firmar) o cifrará el mensaje completo (todas sus partes <emphasis>MIME</emphasis>,
adjuntos incluidos) y dejará tan solo 2 partes MIME, la primera con la versión
de PGP/MIME y la segunda con el mensaje total (adjuntos incluidos) cifrado (y
firmado si así lo solicitamos).
</para>

<para>
<emphasis remap="bf">Nota:</emphasis> Por varios motivos, como que el lector de correo del destinatario
del mensaje no sea capaz de reconocer el formato <emphasis>MIME</emphasis>, podemos necesitar
que la firma no vaya acompañando al mensaje como un adjunto, sino que aparezca
en el mismo cuerpo del mensaje. Para este modo, ver la sección que trata sobre
<emphasis>application/pgp</emphasis> con <link linkend="sec-app-pgp">pgp</link> y con <link linkend="sec-app-gpg">gpg</link>.
</para>

<para>
En los mensajes entrantes que vengan firmados o cifrados con <emphasis>PGP/MIME</emphasis>,
<emphasis>Mutt</emphasis> intentará verificar la firma y/o descifrarlo automáticamente. Ver la
sección sobre <link linkend="sec-procmail.2">procmail</link>, en donde
se comenta cómo cambiar de forma automática el tipo <emphasis>MIME</emphasis> para los mensajes
recibidos cifrados o firmados, que no indican su tipo <emphasis>MIME</emphasis> correctamente.
</para>

<sect2 id="sec-opcion">
<title>Ficheros de configuración opcionales
</title>

<para>
En las siguientes secciones se habla sobre las modificaciones al fichero de
configuración de <emphasis>Mutt</emphasis> para poder usar <link linkend="sec-conf-pgp2">pgp2</link>, <link linkend="sec-conf-pgp5">pgp5</link>, y <link linkend="sec-conf-gpg">gpg</link> con comodidad.
</para>

<para>
Para ello se usa un fichero de configuración llamaremos <literal remap="tt">.gnupgp.mutt</literal> (el
nombre es inventado y le podríamos llamar de cualquier otro modo, siempre y
cuando <emphasis remap="bf">indiquemos el origen</emphasis> de este fichero de configuración en el fichero
de configuración principal <literal remap="tt">&tilde;/.muttrc</literal>.
</para>

<para>
Esto se hace incluyendo el origen (dónde está situado) completo del fichero de
configuración <literal remap="tt">.gnupgp.mutt</literal>, en una línea al final del fichero
<literal remap="tt">&tilde;/.muttrc</literal>.  El directorio en el que situemos éste u otros
ficheros opcionales de configuración puede ser cualquiera, siempre y cuando
tengamos los permisos correctos de acceso a él (en un capítulo anterior lo
incluimos dentro del directorio <literal remap="tt">&tilde;/Mail/</literal>), o podemos crear un
directorio dentro de nuestro directorio de usuario, con un nombre aleatorio:
</para>

<para>

<screen>
~$ mkdir mutt.varios
</screen>

</para>

<para>
en el que copiaremos (o crearemos) el fichero de configuración opcional
<literal remap="tt">.gnupgp.mutt</literal>, y a continuación indicaremos el origen en el fichero
<literal remap="tt">.muttrc</literal> con el comando <literal remap="tt">source</literal>, del siguiente modo:
</para>

<para>

<screen>
source ~/mutt.varios/.gnupgp.mutt
</screen>

</para>

<para>
De este modo <emphasis>Mutt</emphasis> aceptará las variables de configuración en
<literal remap="tt">.gnupgp.mutt</literal> como si estuvieran directamente especificadas en
<literal remap="tt">.muttrc</literal>.
</para>

<para>
Este sistema es útil para evitar tener un fichero de configuración desordenado
y demasiado grande, y puede ser usado para poner cualquier otro grupo de
variables de configuración en otro fichero aparte.  Por ejemplo, de modo
parecido aunque no igual, si usamos <emphasis>vim</emphasis> como el editor por defecto en
<emphasis>Mutt</emphasis>, le podemos indicar a <literal remap="tt">.muttrc</literal> que use un fichero de
configuración <literal remap="tt">.vimrc</literal> distinto al que usamos cuando usemos <emphasis>vim</emphasis> sobre
la línea de comandos.  Para ello, copiaremos primero <literal remap="tt">&tilde;/.vimrc</literal> a
nuestro directorio ficticio para ficheros de configuración opcionales
<literal remap="tt">&tilde;/mutt.varios/</literal> y le daremos un nombre distinto (vg.
<literal remap="tt">vim.mutt</literal>):
</para>

<para>

<screen>
$ cd /home/usuario
~$ cp .vimrc mutt.varios/vim.mutt
</screen>

</para>

<para>
a continuación cambiaremos las variables de configuración que deseamos que sean
distintas en <emphasis>vim</emphasis> como editor de <emphasis>Mutt</emphasis>, y finalmente modificaremos
<literal remap="tt">.muttrc</literal> para que refleje este cambio:
</para>

<para>

<screen>
set editor="/usr/bin/vim -u ~/mutt.varios/vim.mutt"
</screen>

</para>

<para>
Con esta última línea estamos indicando a <literal remap="tt">Mutt</literal> que, en lugar de usar su
editor interno por defecto, use un editor externo, <emphasis>Vim</emphasis>, con las opciones
de configuración que deseamos.
</para>

</sect2>

<sect2 id="sec-conf-gen">
<title>Variables de Configuración General
</title>

<para>
Hay un número de variables que nos servirán para el uso de cualquiera de los
tres sistemas de cifrado público con <emphasis>Mutt</emphasis> por igual.  Éstas variables son
del tipo booleano, y aceptan las opciones <emphasis remap="bf">set</emphasis> (activada) o <emphasis remap="bf">unset</emphasis>
(desactivada).
</para>

<para>
En el fichero de configuración (bien sea <literal remap="tt">&tilde;/.muttrc</literal>, o
<literal remap="tt">&tilde;/mutt.varios/.gnupgp.mutt</literal>, o el que decidamos), el signo de
almohadilla (<emphasis remap="bf">#</emphasis>) es un comentario libre y no se interpreta.  Por tanto,
lo usaremos aquí delante de la aclaración a cada una de las variables:
</para>

<para>
<variablelist>

<varlistentry>
<term>unset pgp_autosign</term>
<listitem>
<para>
# si esta variable está activada, <emphasis>Mutt</emphasis> nos pedirá firmar todo el

# correo saliente. <link linkend="uno">uno</link>
</para>
</listitem></varlistentry>
<varlistentry>
<term>unset pgp_autoencrypt</term>
<listitem>
<para>
# si esta variable está activada, <emphasis>Mutt</emphasis> nos pedirá cifrar todo el

# correo saliente. <link linkend="uno">uno</link>
</para>
</listitem></varlistentry>
<varlistentry>
<term>set pgp_encryptself</term>
<listitem>
<para>
# guardar una copia cifrada de todos los mensajes que se envíen cifrados

# (precisa de la variable de configuración general <literal remap="tt">set copy=yes</literal>).
</para>
</listitem></varlistentry>
<varlistentry>
<term>set pgp_replysign</term>
<listitem>
<para>
# al responder a un mensaje firmado, requerir que el mensaje de respuesta

# sea también firmado.
</para>
</listitem></varlistentry>
<varlistentry>
<term>set pgp_replyencrypt</term>
<listitem>
<para>
# al responder a un mensaje cifrado, requerir que nuestra respuesta

# también vaya cifrada.
</para>
</listitem></varlistentry>
<varlistentry>
<term>set pgp_verify_sig=yes</term>
<listitem>
<para>
# ¿queremos que se verifique automáticamente las firmas de los mensajes

# entrantes? ¡por supuesto que sí!
</para>
</listitem></varlistentry>
<varlistentry>
<term>set pgp_timeout=&lt;n&gt;</term>
<listitem>
<para>
# eliminar la contraseña de la memoria intermedia cada &lt;n&gt;

# segundos.<link linkend="dos">dos</link>
</para>
</listitem></varlistentry>
<varlistentry>
<term>set pgp_sign_as="0xABC123D4"</term>
<listitem>
<para>
# ¿qué clave quiero usar por defecto para firmar los mensajes salientes?

# <emphasis remap="bf">Nota:</emphasis> es posible especificar un id de usuario en lugar de un id de

# clave, pero esto podría confundir si tenemos el mismo id de usuario

# para distintas claves.

</para>
</listitem></varlistentry>
<varlistentry>
<term>set pgp_strict_enc</term>
<listitem>
<para>
# usar codificación «quoted-printable» siempre que PGP la

# requiera.
</para>
</listitem></varlistentry>
<varlistentry>
<term>unset pgp_long_ids</term>
<listitem>
<para>
# no usar identificadores de claves de 64 bits, usar de 32 bits.

</para>
</listitem></varlistentry>
<varlistentry>
<term>set pgp_sign_micalg=&lt;algo&gt;</term>
<listitem>
<para>
# algoritmo de comprobación de la integridad de un mensaje, en donde

# &lt;algo&gt; es uno de los siguientes:<link linkend="tres">tres</link>
</para>

<para>

<itemizedlist>
<listitem>

<para>
<emphasis remap="bf">pgp-mda5</emphasis>

para claves RSA
</para>
</listitem>
<listitem>

<para>
<emphasis remap="bf">pgp-sha1</emphasis>

para claves DSS (DSA)
</para>
</listitem>
<listitem>

<para>
<emphasis remap="bf">pgp-rmd160</emphasis>

</para>
</listitem>

</itemizedlist>

</para>
</listitem></varlistentry>
</variablelist>
</para>

<para>
En las tres subsecciones siguientes se especificarán las variables a configurar
para cada una de las versiones.  La cuarta subsección explica los cambios en
las variables en caso de que usemos más de una versión.
</para>

<para>
(1)<anchor id="uno"/> dado que el contínuo requerimiento por parte de <emphasis>Mutt</emphasis>
para que firmemos o cifremos todos los mensajes salientes puede representar un
inconveniente, es deseable dejar esta variable desactivada.  Esto es
especialmente así en el caso del cifrado, ya que no dispondremos de las claves
públicas de todos los destinatarios.
</para>

<para>
(2)<anchor id="dos"/> depende del número de mensajes que firmemos o descifremos
generalmente, nos interesará mantener la contraseña en la memoria durante más o
menos tiempo.  Esta opción nos evita que tengamos que introducir la contraseña
por cada mensaje que firmemos, o por cada mensaje cifrado que leamos.
<emphasis remap="bf">Aviso:</emphasis> mantener la contraseña en la memoria es inseguro, especialmente en
sistemas conectados a una red.
</para>

<para>
(3)<anchor id="tres"/> esto sólo es necesario para la clave con la que hayamos
configurado para firmar.  Cuando la clave la escojamos desde el menú de
composición, <emphasis>Mutt</emphasis> se encargará de calcular el algoritmo.
</para>

</sect2>

<sect2 id="sec-conf-pgp2">
<title>Variables de Configuración para PGP2
</title>

<para>
Para utilizar PGP2 con <emphasis>Mutt-i</emphasis> es necesario añadir las siguientes
líneas al fichero <literal remap="tt">&tilde;/mutt.varios/.gnupgp.mutt</literal>:
</para>

<para>

<screen>
set pgp_default_version=pgp2
set pgp_key_version=default
set pgp_receive_version=default
set pgp_send_version=default
set pgp_sign_micalg=pgp-md5
set pgp_v2=/usr/bin/pgp
set pgp_v2_pubring=~/.pgp/pubring.pgp
set pgp_v2_secring=~/.pgp/secring.pgp
</screen>

</para>

<para>
Evidentemente, deberán existir los ficheros <literal remap="tt">&tilde;/.pgp/pubring.pgp</literal> y
<literal remap="tt">secring.pgp</literal>. Más información sobre PGP2 con el comando <literal remap="tt">man pgp</literal>.
</para>

</sect2>

<sect2 id="sec-conf-pgp5">
<title>Variables de Configuración para PGP5
 </title>

<para>
Para utilizar PGP5 con <emphasis>Mutt-i</emphasis> es necesario añadir las siguientes
líneas al fichero <literal remap="tt">&tilde;/mutt.varios/.gnupgp.mutt</literal>:
</para>

<para>

<screen>
set pgp_default_version=pgp5
set pgp_key_version=default
set pgp_receive_version=default
set pgp_send_version=default
set pgp_sign_micalg=pgp-sha1
set pgp_v5=/usr/bin/pgp
set pgp_v5_pubring=~/.pgp/pubring.pkr
set pgp_v5_secring=~/.pgp/secring.skr
</screen>

</para>

<para>
Evidentemente, deberán existir los ficheros <literal remap="tt">&tilde;/.pgp/pubring.pkr</literal> y
<literal remap="tt">secring.pkr</literal>. Más información sobre PGP 5 con el comando <literal remap="tt">man pgp5</literal>.
</para>

</sect2>

<sect2 id="sec-conf-gpg">
<title>Variables de Configuración para GnuPG
</title>

<para>
Para utilizar <emphasis>GnuPG</emphasis> con <emphasis>Mutt-i</emphasis> es necesario añadir las siguientes
líneas al fichero <literal remap="tt">&tilde;/mutt.varios/.gnupgp.mutt</literal>:
</para>

<para>

<screen>
set pgp_default_version=gpg
set pgp_key_version=default
set pgp_receive_version=default
set pgp_send_version=default
set pgp_sign_micalg=pgp-sha1
set pgp_gpg=/usr/bin/gpg
set pgp_gpg_pubring=~/.gnupg/pubring.gpg
set pgp_gpg_secring=~/.gnupg/secring.gpg
</screen>

</para>

<para>
Evidentemente, deberán existir los ficheros <literal remap="tt">&tilde;/.gnupg/pubring.gpg</literal>
y <literal remap="tt">secring.gpg</literal>. Más información sobre GnuPG com el comando <literal remap="tt">man
gpg.gnupg</literal>, <literal remap="tt">man gpgm</literal>, y <literal remap="tt">man gpg</literal>.
</para>

</sect2>

<sect2 id="sec-conf-mix">
<title>Variables de Configuración Mixta
</title>

<para>
En el caso que deseemos tener más de uno de los tres sistemas a la vez, es
preciso modificar algunas de las variables que hemos comentado anteriormente.
En realidad tan sólo se trata de eliminar la redundancia en la versión
configurada por defecto.
</para>

<para>
Si, por ejemplo, decidiéramos usar GnuPG como el sistema a utilizar por
defecto, todas las teclas relacionadas con PGP/GnuPG de <emphasis>Mutt</emphasis> llamarían a
éste sistema para cualquier operación de cifrar, descifrar, firmar, verificar,
etc...
 Para ello debemos definir la variable de configuración
<literal remap="tt">$set_pgp_default</literal> <emphasis remap="bf">una sóla vez</emphasis>, así:
</para>

<para>

<screen>
set pgp_default_version=gpg
</screen>

</para>

<para>
con lo cual, y para el uso conjunto de los tres sistemas, la parte
correspondiente al fichero <literal remap="tt">&tilde;/mutt.varios/.gnupgp.mutt</literal> podría
quedar del siguiente modo:
</para>

<para>

<screen>
set pgp_default_version=gpg	# versión a usar por defecto

set pgp_key_version=default	# clave que se usará por defecto, en este
				# caso la definirá gnupg

set pgp_receive_version=default	# para descodificar usará la versión que se
set pgp_send_version=default	# haya configurado por defecto (gpg)

set pgp_gpg=/usr/bin/gpg	# localización del binario de GnuPG
set pgp_gpg_pubring=~/.gnupg/pubring.gpg	# fichero de claves pub. GnuPG
set pgp_gpg_secring=~/.gnupg/secring.gpg	# fichero de claves secr. GnuPG

set pgp_v2=/usr/bin/pgp		# localización del binario de PGP2
set pgp_v2_pubring=~/.pgp/pubring.pgp		# fichero de claves pub. PGP2
set pgp_v2_secring=~/.pgp/secring.pgp		# fichero de claves secr. PGP2

set pgp_v5=/usr/bin/pgp		# localización del binario de PGP5
set pgp_v5_pubring=~/.pgp/pubring.pkr		# fichero de claves pub. PGP5
set pgp_v5_secring=~/.pgp/secring.skr		# fichero de claves secr. PGP5
</screen>

</para>

</sect2>

</sect1>

<sect1>
<title>Macros interesantes para mutt</title>

<para>
<emphasis>Mutt</emphasis> es altamente configurable y puede modificar su forma de trabajo de
modo muy flexible si se hace un uso adecuado de las opciones de <literal remap="tt">.muttrc</literal>.
</para>

<para>
Aquí se presentan algunas macros que ayudarán a generar firmas evitando seguir
el estándar <emphasis>PGP/MIME</emphasis>, para enviarlas a destinatarios que sabemos de
cierto que no pueden verificar las firmas <emphasis>PGP/MIME</emphasis>, y para editar el
fichero de alias y volver a cargarlo sin salir de <emphasis>Mutt</emphasis> (aunque esto último
no está relacionado con <emphasis>PGP/GnuPG</emphasis>, se presenta como ejemplo para
mostrar el poder de las macros en <emphasis>Mutt</emphasis>).
</para>

<para>
Es posible indicar a Mutt las combinaciones de teclado que queremos utilizar
para las opciones de <emphasis>PGP/GnuPG</emphasis> que deseamos implementar en el correo
electrónico. Aun cuando algunas de estas opciones vienen configuradas por
defecto, podemos fácilmente cambiarlas o añadir otras modificando la
configuración.
</para>

<sect2 id="sec-app-pgp">
<title>Firma sobre el propio texto del mensaje sin usar PGP/MIME con PGP5
</title>

<para>
Antes de la existencia de <emphasis>PGP/MIME</emphasis>, la firma de un mensaje iba
incluida en el cuerpo del mensaje. Este caso sigue siendo común con muchos
lectores de correo.
</para>

<para>
En caso de que queramos firmar de esta forma, tenemos dos opciones, dejar el
tipo <emphasis>MIME</emphasis> del mensaje intacto o modificarlo como <literal remap="tt">application/pgp</literal>.
</para>

<para>
Para implementar estas dos formas de firmar en <emphasis>Mutt</emphasis>, añadiremos las líneas
siguientes al fichero <literal remap="tt">&tilde;/mutt.varios/mutt.macros</literal>.  Previamente,
habremos indicado el origen de este fichero de configuración opcional al
fichero de configuración principal <literal remap="tt">.muttrc</literal>; ver <link linkend="sec-opcion">sec-opcion</link>:
</para>

<para>

<screen>
macro	compose	\Cp	"F/usr/bin/pgps\ny"
macro	compose	S	"F/usr/bin/pgps\ny^T^Uapplication/pgp; format=text; x-action=sign\n"
</screen>

</para>

<para>
y de esta forma, pulsando <literal remap="tt">&lt;Ctrl&gt;p</literal> o <literal remap="tt">S</literal> podremos incluir la firma
digital en el adjunto del mensaje sobre el que esté situado el cursor en la
pantalla, en la que se encontrará el mensaje listo para ser enviado.
</para>

</sect2>

<sect2 id="sec-app-gpg">
<title>Firma sobre el propio texto del mensaje sin usar PGP/MIME con GnuPG
</title>

<para>
Igual que en el caso anterior, pero con GnuPG. Las macros quedan de la
siguiente manera:
</para>

<para>

<screen>
macro	compose \CP	"Fgpg --clearsign\ny"
macro	compose \CS	"Fgpg --clearsign\ny^T^Uapplication/pgp; format=text; x-action=sign\n"
</screen>

</para>

</sect2>

<sect2>
<title>Edición del fichero de alias y recarga del mismo</title>

<para>
Con esta macro para incluir en <literal remap="tt">&tilde;/mutt.varios/macros.mutt</literal> puedes
editar con <emphasis>vi</emphasis> (modificando la linea puedes usar otro editor) el fichero de
alias sin salir de <emphasis>Mutt</emphasis> pulsando <literal remap="tt">&lt;Alt&gt;a</literal>.
</para>

<para>

<screen>
macro	index	\ea	"!vi ~/Mail/.alias\n:source =.alias\n"
</screen>

</para>

</sect2>

<sect2>
<title>Más ejemplos de macros</title>

<para>
El siguiente listado ha sido obtenido de Roland Rosenfeld y presenta macros
para cambiar el «sistema de firmado/cifrado por defecto» y firmar sin PGP/MIME
con GnuPG:
</para>

<para>

<screen>
# ~/Mail/.muttrc.macros
# Fichero de configuración del teclado en Mutt-i
# copiado, modificado y traducido del original:
#
################################################################
# The ultimative Key-Bindings for Mutt                         #
#                                                              #
# (c) 1997-1999 Roland Rosenfeld &#60;roland@spinnaker.rhein.de&#62;   #
#                                                              #
# $ Id: keybind,v 1.36 1999/02/20 19:36:28 roland Exp roland $ #
################################################################
#
# Para su correcto funcionamiento, añadir al fichero de
# configuración ~/.muttrc la línea:
# source ~/Mail/.muttrc.macros
#

# Generic keybindings
# (¡para todos los menús de Mutt excepto el del paginador!)
# Con las tres siguientes podemos cambiar el sistema de cripto que
# estemos utilizando por defecto:

# &#60;ESC&#62;1 para GnuPG
macro   generic \e1     ":set pgp_default_version=gpg ?pgp_default_version\n"\
			"Switch to GNU-PG"

# &#60;ESC&#62;2 para PGP2
macro   generic \e2     ":set pgp_default_version=pgp2 ?pgp_default_version\n"\
			"Switch to PGP 2.*"

# &#60;ESC&#62;5 para PGP5
macro   generic \e5     ":set pgp_default_version=pgp5 ?pgp_default_version\n"\ 
			"Switch to PGP 5.*"


# index, OpMain, MENU_MAIN
# (Menú principal)
# La siguiente sólo funciona desde el menú principal (el que nos
# encontramos nada más abrir Mutt).  La combinación de las teclas
# &#60;CTRL&#62;K nos permite extraer las claves públicas de un mensaje si las
# hubiere (esto se sabe porque el mensaje viene precedido por la letra
# K):

macro  pager   \Ck     ":set pipe_decode pgp_key_version=pgp2\n\e\ek:set pgp_key_version=pgp5\n\e\ek:set pgp_key_version=gpg\n\e\ek:set pgp_key_version=default nopipe_decode\n"\ "Extract PGP keys to PGP2, PGP 5, and GnuPG keyrings"


# pager, OpPager, MENU_PAGER
# (Menú del Paginador)
# Permite las mismas operaciones que en el primer caso, y con las mismas
# combinaciones de claves, pero en este caso desde el menú del
# paginador:

macro   pager   \e1     ":set pgp_default_version=gpg ?pgp_default_version\n"\
			"switch to GNUPG"

macro   pager   \e2     ":set pgp_default_version=pgp2 ?pgp_default_version\n"\
			"switch to PGP 2.*"

macro   pager   \e5     ":set pgp_default_version=pgp5 ?pgp_default_version\n"\
			"switch to PGP 5.*"


# compose, OpCompose+OpGerneric, MENU_COMPOSE
# (Menú de composición)
# Las siguientes operaciones se realizan desde el menú de composición.
# Esto es, una vez hemos compuesto el mensaje y lo cerramos para
# enviarlo, justo antes de presionar la tecla "Y" que nos permita
# pasárselo al MTA.

# En este caso creamos un menú que se abre al presionar la tecla "P".
# Las opciones de este menú las ligamos a MENU_PGP. Estas son las
# opciones de uso principal (codificación y firma).

bind	compose	p	pgp-menu

# Como muchos programas no son capaces de implementar las
# espicificaciones de MIME/PGP (especialmente los de M$), las teclas
# &#60;CTRL&#62;P nos permitirán firmar los mensajes "a la antigua"
# (Application/PGP):

macro	compose \CP	"Fgpg --clearsign\ny"

# A continuación, &#60;CTRL&#62;S nos permitirá firmar "a la MIME/PGP" con la
# clave que tengamos definida por defecto.  Esta macro no es necesaria
# ya que lo mismo podemos hacer desde el menú "P":
macro	compose \CS	"Fgpg --clearsign\ny^T^Uapplication/pgp; format=text; x-action=sign\n"
</screen>

</para>

<para>
Es posible añadir más macros, y algunas otras vienen ya configuradas por
defecto en nuevas versiones de Mutt.  Algunas otras opciones incluyen:
</para>

<para>

<itemizedlist>
<listitem>

<para>
&lt;CTRL&gt;K (extraer claves públicas adjuntas a un mensaje)
</para>
</listitem>
<listitem>

<para>
&lt;ESC&gt;K (adjuntar una clave pública a un mensaje)
</para>
</listitem>
<listitem>

<para>
&lt;CTRL&gt;F (al usar la contraseña para firmar o descodificar un
mensaje, ésta queda grabada en memoria.  De este modo podemos borrar la
contraseña de la memoria)
</para>
</listitem>
<listitem>

<para>
etc...
</para>
</listitem>

</itemizedlist>

</para>

<para>
Para ver qué otras opciones tenemos activadas basta con ir al menú de ayuda (?)
desde el menú en que nos encontremos.
</para>

</sect2>

</sect1>

<sect1>
<title>Algunas «recetas» para Procmail</title>

<sect2 id="sec-procmail.1">
<title>Configuración de Procmail para devolver las claves públicas
automáticamente </title>

<para>
Aunque no es el objetivo de este Como, comentaremos que la forma más segura de
obtener la clave pública de una persona es que ella misma nos la provéa en
mano.
</para>

<para>
Como en muchas ocasiones este método no es posible (distancia que separa a los
interesados) las personas se pueden enviar por correo electrónico las claves
públicas o buscarlas en un servidor de claves, pero ninguno de los métodos
garantiza que la clave obtenida sea realmente de quien parece ser su poseedor,
a menos que mediante una comunicación de otro tipo que consideremos
«seguro» (buscar en la guia de teléfonos al propietario y pedirle que nos lea
la «huella» de su clave pública para confirmar que es la misma de la clave que
hemos obtenido por el metono no seguro).
</para>

<para>
Lo que presentamos a continuación es un ejemplo de «receta» para
añadir en <literal remap="tt">.procmailrc</literal> del procesador de correo Procmail para devolver
automáticamente su clave pública al remitente cuando reciba un mensaje con un
determinado texto en la línea <literal remap="tt">Asunto</literal>:
</para>

<para>

<screen>
:0 h
* ^Subject:[ 	]+\/(|enviar)[ 	]+clave pub\&#62;.*
| mutt -s "Re: $MATCH" `formail -rtzxTo:` &lt;/clau/miclave.asc
</screen>

</para>

<para>
Lo que aquí dice es lo siguiente:  tenemos una copia de nuestra clave pública
en ASCII, en un directorio (en este caso el directorio <literal remap="tt">/clau</literal>), en un
fichero llamado <literal remap="tt">miclave.asc</literal>;  así, cuando procmail reciba un mensaje
que lleve en la línea de <literal remap="tt">Asunto:</literal> (<literal remap="tt">Subject:</literal>) la frase
«<emphasis remap="bf">enviar clave pub</emphasis>», enviar el fichero al remitente.
</para>

<para>
IMPORTANTE: lo que va entre los corchetes es <emphasis remap="bf">un espacio</emphasis> y <emphasis remap="bf">un
tabulador</emphasis>.
</para>

</sect2>

<sect2 id="sec-procmail.2">
<title>Verificación y descifrado automáticos de mensajes firmados sin PGP/MIME
</title>

<para>
Cuando recibimos un mensaje firmado digitalmente del tipo MIME/PGP y lo abrimos
en nuestro lector de correo preferido (Mutt, ¿cuál si no?), éste nos lo
reconoce como tal y comprueba la veracidad de la firma siempre que tengamos la
clave pública del firmante.  Estos mensajes son los que llevan la letra «S» al
lado:
</para>

<para>

<screen>
36  S  05/09 Andres Seco Her ( 12K) Al fin
</screen>

</para>

<para>
mientras los mensajes codificados llevan la letra «P»:
</para>

<para>

<screen>
12  P  03/24 Andres Seco Her (6,3K) Re: FW: Re: Mutt - pgp/gnupg
</screen>

</para>

<para>
Pero si el mensaje viene firmado al estilo «application/pgp», nos encontraremos
que al abrir el mensaje no habrá verificación, y éste vendrá con el texto
rodeado con la firma digital, así:
</para>

<para>

<screen>
-----BEGIN PGP SIGNED MESSAGE-----

Date: Tue, 25 May 1999 13:04:26 +0200
From: La Corporación &#60;bill@reboot.com&#62;
Subject: Actualización S.O.
To: Sufrido Usuario &#60;pepe@casa.es&#62;


Sufrido usuario:

le comunicamos que puede usted adquirir la última actualización del
programa O.E. con la adquisición de nuestro sistema operativo reboot99
por el módico precio de ... etc.


-----BEGIN PGP SIGNATURE-----
Version: 2.6.3ia
Charset: noconv

iKBGNpUBX0235VapRBUy1KklAQGl9wQA3SBMio0bbbajHAnyKMOlx3tcgNG7/UVC
AbqXcUnyGGOo13Nbas95G34Fee3wsXIFo1obEfgiRzqPzZPLWoZdAnyTlZyTwCHe
6ifVpLTuaXvcn9/76rXoI6u9svN2cqHCgHuNASKHaK9034uq81PSdW4QdGLgLoeB
vnGmxE+tGg32=
=Xidf
-----END PGP SIGNATURE-----
</screen>

</para>

<para>
Para poder verificarlo tendríamos que guardarlo en un fichero y hacerlo desde
la línea de comandos.  Sin embargo, es posible convertir estos mensajes con
<emphasis>Procmail</emphasis> para que <emphasis>Mutt</emphasis> los reconozca como <emphasis>MIME/PGP</emphasis>.  Basta
con añadir a <literal remap="tt">.procmailrc</literal>:
</para>

<para>

<screen>
:0
* !^Content-Type: message/
* !^Content-Type: multipart/
* !^Content-Type: application/pgp
{
    :0 fBw
    * ^-----BEGIN PGP MESSAGE-----
    * ^-----END PGP MESSAGE-----
    | formail \
        -i "Content-Type: application/pgp; format=text; x-action=encrypt"

    :0 fBw
    * ^-----BEGIN PGP SIGNED MESSAGE-----
    * ^-----BEGIN PGP SIGNATURE-----
    * ^-----END PGP SIGNATURE-----
    | formail \
        -i "Content-Type: application/pgp; format=text; x-action=sign"
}
</screen>

</para>

<para>
Como se puede ver esto sirve tanto para los mensajes firmados como para los
cifrados con application/pgp.
</para>

</sect2>

<sect2>
<title>Cambio del tipo MIME para mensajes con claves públicas sin PGP/MIME</title>

<para>
Cuando recibes una clave pública desde un MUA sin soporte PGP/MIME, debes
salvar la clave en disco y despues insertarla en tu anillo público de llaves,
pero, incluyendo estas lineas en <literal remap="tt">.procmailrc</literal> puedes realizar la inserción
directamente desde el propio <emphasis>Mutt</emphasis>.
</para>

<para>

<programlisting>
    :0 fBw
    * ^-----BEGIN PGP PUBLIC KEY BLOCK-----
    * ^-----END PGP PUBLIC KEY BLOCK-----
    | formail -i "Content-Type: application/pgp-keys; format=text;"
</programlisting>

</para>

<para>
Gracias a Denis Alan por esta nota de <emphasis>Procmail</emphasis>.
</para>

</sect2>

</sect1>

<sect1>
<title>Intercambio de mensajes firmados/cifrados entre diferentes clientes de
correo y plataformas</title>

<para>
Inicialmente, las firmas PGP se añadian al final del texto que deseaban firmar.
Posteriormente, se incluyo el tipo MIME <literal remap="tt">application/pgp</literal> para indicar
que el bloque a continuación contenia firma o cifrado PGP, y finalmente con la
especificación de PGP/MIME se consiguió separar la firma de los bloques a los
que afectaba, de modo que no fueran modificados en absoluto y alguien que no
tuviese PGP pudiese ver el mensaje exactamente como fue enviado (no cuando está
cifrado, evidentemente) sin añadidos al principio y al final de PGP.
</para>

<para>
La situación actual es tal que existen pocos clientes de correo capaces de
integrarse con PGP para ofrecer PGP/MIME, de modo que suele ser necesario
enviar mensajes firmados digitalmente de modo que con clientes de correo que no
soportan PGP/MIME puedan ser verificadas las firmas.
</para>

<para>
En Linux, los clientes de correo disponibles que cumplen la especificación
PGP/MIME son mutt-i y pine. En Windows, solo los clientes de correo Eudora en
sus versiones 3.x y 4.x soportan PGP/MIME. Si conoce otros clientes que lo
soporten esperamos su mensaje indicándonoslo, para incluirlo aquí.
</para>

</sect1>

<sect1>
<title>Programas y versiones utilizados</title>

<para>
Para el desarrollo de esta documentación hemos utilizado las siguientes
versiones de mutt:
</para>

<para>

<itemizedlist>
<listitem>

<para>
Mutt 0.93i - con esta versión de mutt no se puede utilizar GnuPG.
</para>
</listitem>
<listitem>

<para>
Mutt 0.95.3i - todas las versiones de PGP y GnuPG son utilizables.
</para>
</listitem>

</itemizedlist>

</para>

<para>
Y las siguientes versiones de PGP y GnuPG:
</para>

<para>

<itemizedlist>
<listitem>

<para>
PGPi 5.0
</para>
</listitem>
<listitem>

<para>
GnuPG 0.4.3
</para>
</listitem>
<listitem>

<para>
GnuPG 0.9.4
</para>
</listitem>

</itemizedlist>

</para>

</sect1>

<sect1>
<title>Más información</title>

<para>
La documentación original a partir de la cual ha sido obtenido este documento
puede ser encontrada en las paginas man de <literal remap="tt">mutt</literal>, <literal remap="tt">pg</literal>,
<literal remap="tt">pgp5</literal>, <literal remap="tt">gnupg</literal>, <literal remap="tt">procmail</literal>, en los directorios
correspondientes de /usr/doc y en las paginas de los paquetes en la world wide
web:
</para>

<para>

<itemizedlist>
<listitem>

<para>
Página Oficinal de Mutt - <literal remap="tt"><ulink
url="http://www.mutt.org"
>http://www.mutt.org</ulink
></literal>
</para>
</listitem>
<listitem>

<para>
Página Pricipal de GnuPG - <literal remap="tt"><ulink
url="http://www.gnupg.org"
>http://www.gnupg.org</ulink
></literal>
</para>
</listitem>
<listitem>

<para>
Página internacional de PGP - <literal remap="tt"><ulink
url="http://www.pgpi.com"
>http://www.pgpi.com</ulink
></literal>
</para>
</listitem>
<listitem>

<para>
Página Oficinal de Procmail - <literal remap="tt"><ulink
url="http://www.procmail.org"
>http://www.procmail.org</ulink
></literal>
</para>
</listitem>

</itemizedlist>

</para>

<para>
Las recomendaciones (request for comments, RFC) que hacen referencia a temas
tratados en el documento son las siguientes:
</para>

<para>

<itemizedlist>
<listitem>

<para>
1847 - Security Multiparts for MIME: Multipart/signed and Multipart/encripted
</para>
</listitem>
<listitem>

<para>
1848 - MIME Object Security Services
</para>
</listitem>
<listitem>

<para>
1991 - PGP Message Exchange Formats
</para>
</listitem>
<listitem>

<para>
2015 - MIME Security with Pretty Good Privacy (PGP)
</para>
</listitem>
<listitem>

<para>
2440 - OpenPGP Message Format
</para>
</listitem>

</itemizedlist>

</para>

<para>
y pueden ser encontradas en /usr/doc/doc-rfc y en diversos lugares de la world
wide web, como <literal remap="tt"><ulink
url="http://metalab.unc.edu"
>http://metalab.unc.edu</ulink
></literal> y <literal remap="tt"><ulink
url="http://nic.mil"
>http://nic.mil</ulink
></literal>.  Puedes solicitar información sobre las RFCs en
<literal remap="tt"><ulink
url="mailto:RFC-INFO@ISI.EDU"
>RFC-INFO@ISI.EDU</ulink
></literal>
</para>

</sect1>

<sect1 id="Insflug">
<title>Anexo: El INSFLUG </title>

<para>
El <emphasis remap="it">INSFLUG</emphasis> forma parte del grupo internacional <emphasis remap="it">Linux Documentation
Project</emphasis>, encargándose de las traducciones al castellano de los Howtos,
así como de la producción de documentos originales en aquellos casos en los
que no existe análogo en inglés, centrándose, preferentemente, en documentos
breves, como los <emphasis>COMOs</emphasis> y <emphasis>PUFs</emphasis> (<emphasis remap="bf">P</emphasis>reguntas de <emphasis remap="bf">U</emphasis>so
<emphasis remap="bf">F</emphasis>recuente, las <emphasis remap="it">FAQs</emphasis>. <literal remap="tt">:)</literal> ), etc.
</para>

<para>
Diríjase a la sede del Insflug para más información al respecto.
</para>

<para>
En ella encontrará siempre las <emphasis remap="bf">últimas</emphasis> versiones de las traducciones
«oficiales»:  <literal remap="tt"><ulink
url="http://www.insflug.org"
>www.insflug.org</ulink
></literal>. Asegúrese de comprobar cuál es la última
versión disponible en el Insflug antes de bajar un documento de un
servidor réplica. 
</para>

<para>
Además, cuenta con un sistema interactivo de gestión de fe de erratas y
sugerencias en línea, motor de búsqueda específico, y más servicios en los
que estamos trabajando incesantemente.
</para>

<para>
Se proporciona también una lista de los servidores réplica (<emphasis remap="it">mirror</emphasis>)
del Insflug más cercanos a Vd., e información relativa a otros recursos en
castellano.
</para>

<para>
En <literal remap="tt"><ulink
url="http://www.insflug.org/insflug/creditos.php3"
>http://www.insflug.org/insflug/creditos.php3</ulink
></literal> cuenta con una
detallada relación de las personas que hacen posible tanto esto como las
traducciones.
</para>

<para>
¡Diríjase a <literal remap="tt"><ulink
url="http://www.insflug.org/colaboracion/index.php3"
>http://www.insflug.org/colaboracion/index.php3</ulink
></literal> si desea
unirse a nosotros!.
</para>

<para>
«Cartel» Insflug, <literal remap="tt"><ulink
url="mailto:cartel@insflug.org"
>cartel@insflug.org</ulink
></literal>. 
</para>

</sect1>

</article>
